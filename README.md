# Tree-Sitterä»£ç åˆ†æå™¨

åŸºäºtree-sitterçš„å¤šè¯­è¨€ä»£ç ç»“æ„åˆ†æå·¥å…·ï¼Œç”ŸæˆçŸ¥è¯†å›¾è°±ä¾›LLMç†è§£ä»£ç ç»“æ„ã€‚

## ğŸ† æ ¸å¿ƒç‰¹æ€§

- **ğŸš€ æ™ºèƒ½å‹ç¼©**: å¯å°†ä»£ç ç»“æ„å‹ç¼©76%+ï¼Œä¸“ä¸ºLLMä¼˜åŒ–
- **ğŸ’¾ æ™ºèƒ½ç¼“å­˜**: Gitç±»ä¼¼çš„æ–‡ä»¶å“ˆå¸Œæœºåˆ¶ï¼Œæ€§èƒ½æå‡5-100å€
- **ğŸ¯ C#æ·±åº¦æ”¯æŒ**: å®Œæ•´è§£æç±»ã€æ¥å£ã€æ–¹æ³•ã€å±æ€§ã€å­—æ®µç­‰
- **ğŸ§  æ“ä½œæ¨æ–­**: æ™ºèƒ½åˆ†ææ–¹æ³•æ“ä½œç±»å‹ï¼ˆCRUDã€éªŒè¯ã€è®¡ç®—ç­‰ï¼‰
- **ğŸ”— å…³ç³»å»ºæ¨¡**: ç»§æ‰¿ã€ä½¿ç”¨ã€åŒ…å«ç­‰ä»£ç å…³ç³»
- **ğŸ“Š å¤šç§è¾“å‡º**: JSONæ ¼å¼ã€LLMæç¤ºæ–‡æœ¬
- **ğŸ”§ æ˜“æ‰©å±•**: å¯è½»æ¾æ”¯æŒå…¶ä»–ç¼–ç¨‹è¯­è¨€
- **ğŸŒ MCPåè®®**: æ”¯æŒModel Context Protocolï¼Œä¸AIåŠ©æ‰‹æ— ç¼é›†æˆ

## ğŸ“Š å‹ç¼©æ•ˆæœ

```
å®Œæ•´æ¨¡å¼: 69ä¸ªèŠ‚ç‚¹, 41ä¸ªå…³ç³»
å‹ç¼©æ¨¡å¼: 16ä¸ªèŠ‚ç‚¹, 14ä¸ªå…³ç³»  âœ¨
å‹ç¼©æ¯”ä¾‹: 76.8% èŠ‚ç‚¹å‡å°‘
```

**å‹ç¼©ä¼˜åŠ¿**:
- âœ… å¤§å¹…å‡å°‘LLM tokenæ¶ˆè€—
- âœ… ä¿ç•™å…³é”®ä»£ç ç»“æ„
- âœ… æ™ºèƒ½æ“ä½œç±»å‹æ¨æ–­  
- âœ… æé«˜LLMç†è§£æ•ˆç‡

## ğŸš€ ç¼“å­˜æ€§èƒ½

```
ç¬¬ä¸€æ¬¡åˆ†æ: 0.75ç§’ (å®Œæ•´åˆ†æ)
ç¬¬äºŒæ¬¡åˆ†æ: 0.14ç§’ (ä½¿ç”¨ç¼“å­˜)
æ€§èƒ½æå‡: 5.6x å€ ğŸš€
```

**ç¼“å­˜ä¼˜åŠ¿**:
- âœ… æ–‡ä»¶å“ˆå¸Œæ£€æµ‹å˜åŒ–ï¼ˆç±»ä¼¼Gitï¼‰
- âœ… æ™ºèƒ½å¢é‡æ›´æ–°
- âœ… è·¨ä¼šè¯æŒä¹…åŒ–
- âœ… é¡¹ç›®çº§åˆ«ç¼“å­˜ç®¡ç†

## å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åœ¨clineä¸­ä½¿ç”¨
```json
{
  "mcpServers": {
    "tree-sitter-code-analyzer": {
      "autoApprove": [],
      "disabled": false,
      "timeout": 60,
      "type": "stdio",
      "command": "python",
      "args": [
        "your path/tree-sitter-mcp-code-analyzer/mcp_server.py"
      ]
    }
  }

    "tree-sitter-code-analyzers": {
      "autoApprove": [
      ],
      "disabled": false,
      "timeout": 60,
      "type": "sse",
      "url": "http://127.0.0.1:3000/mcp",
      "headers": {
        "username": "aaaa",
        "git_token": "your-token",
        "repo": "https://github.com/lkwslm/tree-sitter-mcp-code-analyzer.git",
        "branch": "main",
        "sync": "false",
        "force_clean": "false"
      }
    }
}

```

### å‘½ä»¤è¡Œæ¨¡å¼
```bash
python main.py --input <ä»£ç æ–‡ä»¶æˆ–ç›®å½•> --output <è¾“å‡ºç›®å½•> --language csharp
```

### MCPæœåŠ¡å™¨æ¨¡å¼ï¼ˆæ¨èï¼‰
#### æ ‡å‡†MCPåè®®ï¼ˆstdioï¼‰
```bash
# å¯åŠ¨MCPæœåŠ¡å™¨
python mcp_server.py
```

#### HTTP APIæ¨¡å¼
```bash
# å¯åŠ¨HTTPæœåŠ¡å™¨ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
python mcp_http_server.py
# æˆ–ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
start_mcp_http_server.bat

# å¯åŠ¨HTTPæœåŠ¡å™¨ï¼ˆStreamableHTTPæ¨¡å¼ï¼‰
python mcp_http_server.py --streamable

# è®¿é—®åœ°å€
# - æœåŠ¡åœ°å€: http://127.0.0.1:8002
# - APIæ–‡æ¡£: http://127.0.0.1:8002/docs
# - Webå®¢æˆ·ç«¯: æ‰“å¼€ web_client.html
```

#### å¿«é€Ÿåˆ†æAPIç¤ºä¾‹
```bash
# ä½¿ç”¨curlåˆ†æé¡¹ç›®
curl -X POST "http://127.0.0.1:8002/analyze" \
     -H "Content-Type: application/json" \
     -d '{
       "project_path": "/path/to/project",
       "language": "csharp",
       "compress": true
     }'

# è·å–ç±»å‹ä¿¡æ¯
curl -X POST "http://127.0.0.1:8002/mcp/call_tool" \
     -H "Content-Type: application/json" \
     -d '{
       "name": "get_type_info",
       "arguments": {"type_name": "Program"}
     }'
```

## æ”¯æŒçš„è¯­è¨€

- C# (csharp)
- å¯æ‰©å±•æ”¯æŒå…¶ä»–è¯­è¨€

## è¾“å‡ºæ ¼å¼

- çŸ¥è¯†å›¾è°±JSONæ–‡ä»¶
- å¯è§†åŒ–å›¾å½¢æ–‡ä»¶
- ç»“æ„åŒ–åˆ†ææŠ¥å‘Š

## ğŸ“ é¡¹ç›®ç»“æ„

```
my-tree-sitter/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒè§£æå™¨
â”‚   â”œâ”€â”€ languages/      # è¯­è¨€ç‰¹å®šè§£æå™¨
â”‚   â”œâ”€â”€ knowledge/      # çŸ¥è¯†å›¾è°±ç”Ÿæˆ
â”‚   â”œâ”€â”€ cache/          # æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ
â”‚   â””â”€â”€ config/         # é…ç½®ç®¡ç†
â”œâ”€â”€ examples/           # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ tests/              # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ mcp_server.py      # MCPæœåŠ¡å™¨ï¼ˆstdioï¼‰
â”œâ”€â”€ mcp_http_server.py # HTTPæœåŠ¡å™¨
â”œâ”€â”€ web_client.html    # Webå®¢æˆ·ç«¯ç•Œé¢
â””â”€â”€ requirements.txt   # ä¾èµ–åŒ…
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŠ¿

- **å‹ç¼©æ•ˆæœ**: 76%+ èŠ‚ç‚¹å‡å°‘ï¼Œå¤§å¹…å‡å°‘LLM tokenæ¶ˆè€—
- **ç¼“å­˜æ€§èƒ½**: 5-100å€æ€§èƒ½æå‡ï¼ŒåŒä¸€é¡¹ç›®é‡å¤åˆ†ææé€Ÿ
- **æ™ºèƒ½æ£€æµ‹**: ç±»ä¼¼Gitçš„æ–‡ä»¶å“ˆå¸Œæœºåˆ¶ï¼Œåªåœ¨å¿…è¦æ—¶é‡æ–°åˆ†æ

## ğŸ”— é›†æˆæ–¹å¼

- **AIåŠ©æ‰‹**: é€šè¿‡MCPåè®®ä¸å„ç§ AIåŠ©æ‰‹é›†æˆ
- **Webåº”ç”¨**: HTTP APIæ”¯æŒWebåº”ç”¨ã€ç§»åŠ¨åº”ç”¨é›†æˆ
- **CI/CD**: ä½œä¸ºä»£ç åˆ†æå¾®æœåŠ¡é›†æˆåˆ°æ„å»ºæµæ°´çº¿
- **IDEæ’ä»¶**: æä¾›åç«¯æœåŠ¡æ”¯æŒ